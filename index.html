<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DGO Insight 路 Panel</title>

  <!-- Estilos globales -->
  <link rel="stylesheet" href="style.css" />

  <!-- Firebase central -->
  <script src="firebase.js"></script>
</head>

<body>

  <!-- HEADER ESTILO SALESFORCE -->
  <header class="crm-header">
    <div class="crm-logo">DGO Insight 路 CRM Obras</div>

    <nav class="crm-nav">
      <button onclick="window.location='index.html'">Panel</button>
      <button onclick="window.location='proyectos.html'">Proyectos</button>
    </nav>
  </header>

  <!-- CONTENIDO -->
  <main id="app">
    <h1 class="crm-page-title">Panel</h1>
    <p class="crm-page-subtitle">
      Resumen de tareas y seguimientos activos de tus proyectos.
    </p>

    <!-- Loader -->
    <div id="panel-loading" style="display:none; margin-bottom:8px;">
      Cargando datos...
    </div>

    <!-- TARJETAS RESUMEN -->
    <section class="crm-row" style="margin-bottom:12px;">
      <div class="crm-col-3">
        <div class="crm-card">
          <div class="crm-card-header">
            <div class="crm-card-title">Total acciones</div>
          </div>
          <div style="font-size:22px;font-weight:700;" id="stat-total">0</div>
        </div>
      </div>

      <div class="crm-col-3">
        <div class="crm-card">
          <div class="crm-card-header">
            <div class="crm-card-title">Retrasadas</div>
          </div>
          <div style="font-size:22px;font-weight:700;color:#c23934;" id="stat-retrasadas">0</div>
        </div>
      </div>

      <div class="crm-col-3">
        <div class="crm-card">
          <div class="crm-card-header">
            <div class="crm-card-title">Hoy</div>
          </div>
          <div style="font-size:22px;font-weight:700;color:#0e9f6e;" id="stat-hoy">0</div>
        </div>
      </div>

      <div class="crm-col-3">
        <div class="crm-card">
          <div class="crm-card-header">
            <div class="crm-card-title">Pr贸x. 7 d铆as</div>
          </div>
          <div style="font-size:22px;font-weight:700;color:#0176d3;" id="stat-prox7">0</div>
        </div>
      </div>
    </section>

    <!-- LISTAS -->
    <section class="crm-row" style="margin-bottom:16px;">
      <div class="crm-col-4">
        <div class="crm-card">
          <div class="crm-card-header">
            <div class="crm-card-title">Retrasadas</div>
          </div>
          <div id="list-retrasadas"></div>
        </div>
      </div>

      <div class="crm-col-4">
        <div class="crm-card">
          <div class="crm-card-header">
            <div class="crm-card-title">Hoy</div>
          </div>
          <div id="list-hoy"></div>
        </div>
      </div>

      <div class="crm-col-4">
        <div class="crm-card">
          <div class="crm-card-header">
            <div class="crm-card-title">Pr贸x. 7 d铆as</div>
          </div>
          <div id="list-prox7"></div>
        </div>
      </div>
    </section>

    <!-- TABLA PRINCIPAL -->
    <section class="crm-card">
      <div class="crm-card-header">
        <div class="crm-card-title">Listado de acciones por proyecto</div>
        <button id="btn-panel-refresh" class="crm-btn"> Refrescar</button>
      </div>

      <div class="crm-table-wrapper">
        <table class="crm-table">
          <thead>
            <tr>
              <th>Proyecto</th>
              <th>Ciudad</th>
              <th>Provincia</th>
              <th>Fase</th>
              <th>Fecha tarea</th>
              <th>Comentario tarea</th>
              <th>Fecha seguimiento</th>
              <th>Comentario seguimiento</th>
            </tr>
          </thead>
          <tbody id="panel-table-body">
            <!-- Rellenado dinamicamente -->
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <!-- TOAST -->
  <div id="toast"
       style="position:fixed;right:16px;bottom:16px;padding:8px 10px;border-radius:6px;
              font-size:13px;background:#c23934;color:#fff;opacity:0;transition:opacity .3s;z-index:200;">
  </div>

  <!-- L贸gica del Panel -->
  <script src="app.js"></script>

</body>
</html>
