<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CRM 2N – Scouting / Buscar obras</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!-- NAV SUPERIOR -->
  <div class="topnav">
    <div class="logo">CRM 2N</div>

    <div class="nav-tabs">
      <div class="nav-item" onclick="location.href='index.html'">Dashboard</div>
      <div class="nav-item" onclick="location.href='proyectos.html'">Proyectos</div>
      <div class="nav-item active" onclick="location.href='buscar.html'">Buscar</div>
      <div class="nav-item" onclick="location.href='pipeline.html'">Pipeline</div>
      <div class="nav-item" onclick="location.href='clientes.html'">Clientes</div>
      <div class="nav-item" onclick="location.href='tareas.html'">Tareas</div>
      <div class="nav-item" onclick="location.href='reportes.html'">Reportes</div>
    </div>

    <input type="text" class="search-box" placeholder="(Solo UI) Buscar..." />
  </div>

  <main class="content">
    <!-- Intro -->
    <div class="card" style="margin-bottom:16px;">
      <div style="font-size:11px;text-transform:uppercase;color:#6B7280;font-weight:600;letter-spacing:.06em;">
        Scouting de oportunidades
      </div>
      <div style="font-size:18px;font-weight:600;margin-top:2px;margin-bottom:4px;color:#111827;">
        Generador de prompt para buscar obras en Internet (orientado a 2N)
      </div>
      <p style="font-size:13px;color:#4B5563;margin:0;">
        Rellena los campos y el CRM te generará un prompt listo para copiar y pegar en ChatGPT / Gemini.
        El modelo hará una <b>investigación profunda</b> en Internet y devolverá una tabla de proyectos
        con <b>prioridad de encaje para soluciones 2N</b> (videoportero IP y control de accesos),
        que luego podrás importar en el apartado <b>Proyectos</b>.
      </p>
    </div>

    <!-- Formulario -->
    <div class="card">
      <div class="card-title">Configurar búsqueda</div>

      <div class="form-grid">
        <!-- Zonas -->
        <div class="form-group">
          <label for="zonas">Zonas / provincias objetivo</label>
          <input id="zonas" placeholder="Ej: Madrid, Málaga, Valencia, Barcelona, Mallorca" />
        </div>

        <!-- Tipo de activo -->
        <div class="form-group">
          <label>Tipo de activo</label>
          <div style="display:flex;flex-wrap:wrap;gap:6px;font-size:12px;">
            <label><input type="checkbox" class="chk-tipo" value="Residencial BTR" /> Residencial BTR</label>
            <label><input type="checkbox" class="chk-tipo" value="Residencial BTS" /> Residencial BTS</label>
            <label><input type="checkbox" class="chk-tipo" value="Coliving" /> Coliving</label>
            <label><input type="checkbox" class="chk-tipo" value="Hoteles" /> Hoteles</label>
            <label><input type="checkbox" class="chk-tipo" value="Oficinas" /> Oficinas</label>
            <label><input type="checkbox" class="chk-tipo" value="Retail" /> Retail</label>
            <label><input type="checkbox" class="chk-tipo" value="Mixto" /> Mixto</label>
          </div>
        </div>

        <!-- Segmento orientado a tipología 2N -->
        <div class="form-group">
          <label for="segmento">Segmento principal (tipología objetivo)</label>
          <select id="segmento">
            <option value="">Cualquiera</option>
            <option value="residencia">Residencia / residencial multifamiliar</option>
            <option value="villas">Villas</option>
            <option value="lujo">Residenciales de lujo / high-end</option>
            <option value="oficinas">Oficinas / edificios corporativos</option>
          </select>
        </div>

        <!-- Ticket mínimo -->
        <div class="form-group">
          <label for="ticketMin">Ticket mínimo por proyecto (estimado)</label>
          <input id="ticketMin" type="number" min="0" step="50000" placeholder="Ej: 3000000" />
          <div style="font-size:11px;color:#6B7280;margin-top:2px;">
            Importe en euros (€). Pide que se muestren proyectos con inversión/obra igual o superior.
          </div>
        </div>

        <!-- Estado / fase -->
        <div class="form-group">
          <label>Estado / fase del proyecto</label>
          <div style="display:flex;flex-wrap:wrap;gap:6px;font-size:12px;">
            <label><input type="checkbox" class="chk-fase" value="suelo" /> Suelo / compra de suelo</label>
            <label><input type="checkbox" class="chk-fase" value="licencia" /> Proyecto / licencia</label>
            <label><input type="checkbox" class="chk-fase" value="construccion" /> En construcción</label>
            <label><input type="checkbox" class="chk-fase" value="llave en mano" /> Llave en mano / entrega próxima</label>
          </div>
        </div>

        <!-- Perfiles objetivo -->
        <div class="form-group">
          <label>Perfiles / players objetivo</label>
          <div style="display:flex;flex-wrap:wrap;gap:6px;font-size:12px;">
            <label><input type="checkbox" class="chk-player" value="promotoras" /> Promotoras</label>
            <label><input type="checkbox" class="chk-player" value="constructoras" /> Constructoras</label>
            <label><input type="checkbox" class="chk-player" value="estudios de arquitectura" /> Arquitecturas</label>
            <label><input type="checkbox" class="chk-player" value="ingenierías" /> Ingenierías</label>
            <label><input type="checkbox" class="chk-player" value="fondos" /> Fondos / socimis</label>
            <label><input type="checkbox" class="chk-player" value="family offices" /> Family offices</label>
          </div>
        </div>

        <!-- Horizonte temporal -->
        <div class="form-group">
          <label for="horizonte">Horizonte temporal</label>
          <select id="horizonte">
            <option value="">Cualquiera</option>
            <option value="corto">Corto plazo (0–2 años)</option>
            <option value="medio">Medio plazo (2–5 años)</option>
            <option value="largo">Largo plazo (+5 años)</option>
          </select>
        </div>

        <!-- Notas -->
        <div class="form-group" style="grid-column:1/-1;">
          <label for="notasExtra">Notas adicionales (palabras clave, cadenas, operadores, etc.)</label>
          <textarea id="notasExtra" rows="3"
            placeholder="Ej: solo build-to-rent de lujo, foco en vistas al mar, proyectos con garaje y zonas comunes potentes, etc."></textarea>
        </div>
      </div>

      <!-- Botones -->
      <div style="margin-top:14px;display:flex;gap:8px;justify-content:flex-end;">
        <button id="btnLimpiar" class="btn-secondary" type="button">Limpiar</button>
        <button id="btnGenerar" class="btn-primary" type="button">Generar prompt</button>
      </div>
    </div>

    <!-- Prompt generado -->
    <div class="card" style="margin-top:16px;">
      <div class="card-title">Prompt generado</div>
      <p style="font-size:12px;color:#6B7280;margin-top:0;">
        Copia y pega este prompt en ChatGPT / Gemini. El modelo hará <b>búsqueda en modo investigación profunda</b>,
        y te devolverá una tabla de proyectos con <b>prioridad de encaje para soluciones 2N</b>.
      </p>

      <textarea id="promptGenerado" rows="14"
        style="width:100%;border-radius:8px;border:1px solid #D1D5DB;padding:8px 10px;font-size:12px;"></textarea>

      <div style="margin-top:8px;display:flex;justify-content:flex-end;">
        <button id="btnCopiar" class="btn-secondary" type="button">Copiar prompt</button>
      </div>
    </div>
  </main>

  <script>
    const zonasInput = document.getElementById("zonas");
    const chkTipo = document.querySelectorAll(".chk-tipo");
    const segmentoSel = document.getElementById("segmento");
    const ticketMinInput = document.getElementById("ticketMin");
    const chkFase = document.querySelectorAll(".chk-fase");
    const chkPlayer = document.querySelectorAll(".chk-player");
    const horizonteSel = document.getElementById("horizonte");
    const notasExtra = document.getElementById("notasExtra");

    const btnGenerar = document.getElementById("btnGenerar");
    const btnLimpiar = document.getElementById("btnLimpiar");
    const btnCopiar = document.getElementById("btnCopiar");
    const promptGenerado = document.getElementById("promptGenerado");

    function getCheckedValues(nodeList) {
      return Array.from(nodeList)
        .filter(el => el.checked)
        .map(el => el.value);
    }

    function generarPrompt() {
      const zonas = zonasInput.value.trim();
      const tipos = getCheckedValues(chkTipo);
      const segmento = segmentoSel.value;
      const ticketMin = ticketMinInput.value.trim();
      const fases = getCheckedValues(chkFase);
      const players = getCheckedValues(chkPlayer);
      const horizonte = horizonteSel.value;
      const notas = notasExtra.value.trim();

      let partes = [];

      // Rol y contexto 2N + investigación profunda
      partes.push(
        "Actúa como un analista sénior de mercado inmobiliario y consultor de tecnología de acceso y videoportero IP, especializado en soluciones de 2N (videoportero IP, control de accesos, integración con domótica/PMS, zonas comunes, parkings, etc.)."
      );
      partes.push(
        "Quiero que trabajes en MODO INVESTIGACIÓN PROFUNDA: realiza una búsqueda exhaustiva y actualizada en Internet (notas de prensa, webs de promotoras, constructoras, arquitecturas, fondos, portales inmobiliarios profesionales, informes de mercado y noticias especializadas)."
      );

      // Zonas
      if (zonas) {
        partes.push(
          `Identifica proyectos de obra nueva en las siguientes zonas de España: ${zonas}.`
        );
      } else {
        partes.push(
          "Identifica proyectos de obra nueva relevantes en España, priorizando capitales de provincia y zonas de costa con alta inversión."
        );
      }

      // Tipo de activo
      if (tipos.length) {
        partes.push(
          `El foco debe estar en activos de tipo: ${tipos.join(", ")}.`
        );
      } else {
        partes.push(
          "Puedes considerar residenciales BTR/BTS, coliving, hoteles, oficinas y proyectos mixtos siempre que tengan escala suficiente."
        );
      }

      // Segmento orientado a tipología 2N
      if (segmento === "residencia") {
        partes.push(
          "Prioriza edificios residenciales multifamiliares y complejos residenciales donde tenga sentido instalar videoportero IP en accesos principales, portales, garajes y zonas comunes."
        );
      } else if (segmento === "villas") {
        partes.push(
          "Prioriza villas y conjuntos de villas de alto valor, donde el control de accesos, la imagen de entrada y la experiencia premium sean clave."
        );
      } else if (segmento === "lujo") {
        partes.push(
          "Prioriza residenciales de lujo / high-end, con fuerte énfasis en diseño, entrada icónica, servicios de concierge y zonas comunes potentes."
        );
      } else if (segmento === "oficinas") {
        partes.push(
          "Prioriza edificios de oficinas y corporativos donde haya múltiples accesos, control de visitantes, ascensores controlados y zonas de coworking."
        );
      }

      // Ticket mínimo
      if (ticketMin) {
        partes.push(
          `Filtra proyectos con un ticket estimado de obra o inversión igual o superior a ${ticketMin} € (si no hay dato exacto, utiliza una estimación razonable basada en superficie, nº de unidades y rango de precios de la zona).`
        );
      }

      // Fases
      if (fases.length) {
        partes.push(
          `Interesan proyectos en las siguientes fases: ${fases.join(", ")}.`
        );
      } else {
        partes.push(
          "Se pueden incluir proyectos desde la fase de suelo/proyecto hasta obra en construcción o próxima entrega, siempre que aún haya margen de diseño técnico (accesos, portales, zonas comunes)."
        );
      }

      // Players
      if (players.length) {
        partes.push(
          `Me interesa conocer los principales players implicados, especialmente: ${players.join(", ")}.`
        );
      } else {
        partes.push(
          "Incluye siempre que sea posible los datos de promotora, constructora, estudio de arquitectura, ingeniería y, si aplica, fondo, socimi o family office involucrado."
        );
      }

      // Horizonte
      if (horizonte === "corto") {
        partes.push(
          "Prioriza proyectos con entrega o desarrollo previsto en el corto plazo (0–2 años), donde aún sea viable proponer soluciones de videoportero IP y control de accesos antes de la fase final de instalaciones."
        );
      } else if (horizonte === "medio") {
        partes.push(
          "Prioriza proyectos con entrega o desarrollo previsto en el medio plazo (2–5 años), donde haya tiempo para trabajar especificaciones técnicas y prescripción de soluciones 2N."
        );
      } else if (horizonte === "largo") {
        partes.push(
          "Puedes incluir también proyectos a más largo plazo (+5 años) si son emblemáticos o de gran volumen, marcándolos igualmente en la tabla."
        );
      }

      if (notas) {
        partes.push(`Ten en cuenta además lo siguiente a la hora de buscar: ${notas}`);
      }

      // Encaje 2N
      partes.push(
        "Muy importante: para cada proyecto, evalúa específicamente el potencial de encaje de soluciones de videoportero IP y control de accesos de 2N (por ejemplo: número de accesos peatonales y de vehículos, portales de vivienda, presencia de garajes, trasteros, gimnasios, piscinas, zonas comunes, accesos a oficinas, etc.)."
      );
      partes.push(
        "Utiliza esta evaluación para asignar a cada proyecto una prioridad de encaje 2N (ALTO, MEDIO o BAJO) en función del número de accesos, la complejidad del edificio, el segmento y el presupuesto."
      );
      partes.push(
        "Ordena la tabla poniendo primero los proyectos con encaje 2N ALTO, después MEDIO y por último BAJO."
      );

      // Formato de salida
      partes.push(
        "Devuélveme el resultado en una tabla (markdown) con una fila por proyecto y al menos las siguientes columnas:"
      );
      partes.push(
        "- Ciudad / Zona\n" +
        "- Nombre del proyecto o promoción\n" +
        "- Tipo de activo (BTR, BTS, hotel, coliving, oficinas, mixto, etc.)\n" +
        "- Segmento / posicionamiento (lujo, premium, core, villas, etc.)\n" +
        "- Nº aproximado de unidades / habitaciones\n" +
        "- Estado / fase (suelo, licencia, construcción, llave en mano, etc.)\n" +
        "- Promotora / Propiedad\n" +
        "- Estudio de arquitectura\n" +
        "- Ingeniería (si aplica)\n" +
        "- Constructora\n" +
        "- Ticket estimado de obra o inversión (€)\n" +
        "- Año/fecha estimada de entrega\n" +
        "- Encaje soluciones 2N (ALTO / MEDIO / BAJO)\n" +
        "- Motivo del encaje 2N (ej: nº accesos, uso intensivo de zonas comunes, hotel con muchas habitaciones, oficinas multi-tenant, villas de lujo, etc.)\n" +
        "- Enlace a la fuente principal (web de la promotora, nota de prensa, portal inmobiliario profesional, etc.)"
      );

      partes.push(
        "Si no encuentras alguno de los datos para un proyecto, deja la celda en blanco pero mantén la fila igualmente. Prioriza siempre la calidad y relevancia de los proyectos frente a la cantidad."
      );

      promptGenerado.value = partes.join("\n\n");
    }

    function limpiarFormulario() {
      zonasInput.value = "";
      chkTipo.forEach(c => (c.checked = false));
      segmentoSel.value = "";
      ticketMinInput.value = "";
      chkFase.forEach(c => (c.checked = false));
      chkPlayer.forEach(c => (c.checked = false));
      horizonteSel.value = "";
      notasExtra.value = "";
      promptGenerado.value = "";
    }

    btnGenerar.addEventListener("click", generarPrompt);
    btnLimpiar.addEventListener("click", limpiarFormulario);

    btnCopiar.addEventListener("click", async () => {
      try {
        await navigator.clipboard.writeText(promptGenerado.value || "");
        btnCopiar.textContent = "Copiado ✔";
        setTimeout(() => (btnCopiar.textContent = "Copiar prompt"), 1200);
      } catch {
        alert("No se ha podido copiar al portapapeles.");
      }
    });
  </script>
</body>
</html>
